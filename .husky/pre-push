#!/bin/bash

echo "ğŸ” Running pre-push tests..."

# Run server and SDK tests
npm test

# Check if Redis is available and run E2E tests
if redis-cli ping > /dev/null 2>&1; then
    echo "ğŸ“¦ Running E2E tests with Redis..."
    npm run test:e2e
else
    echo "âš ï¸  Redis not available, skipping E2E tests"
fi

echo "âœ… All tests passed!"